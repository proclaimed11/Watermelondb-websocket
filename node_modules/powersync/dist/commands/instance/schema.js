/* eslint-disable perfectionist/sort-objects */
import { Command, ux } from '@oclif/core';
import * as PowerSyncClient from '../../service/powersync.client.js';
import { checkThatEnvVariablesAreSet } from '../../utils.js';
export default class InstanceSchema extends Command {
    static description = 'View the schema of the current instance.';
    static examples = ['<%= config.bin %> <%= command.id %>'];
    async run() {
        checkThatEnvVariablesAreSet(this.config.bin, true);
        const result = await PowerSyncClient.getInstanceSchema();
        result.connections[0].schemas.map((schema) => {
            ux.log(`\nSCHEMA: ${schema.name}\n`);
            ux.table(schema.tables, {
                name: {},
                columns: {}
            });
            return null;
        });
    }
}
